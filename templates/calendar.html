<div class="w-calendar" ng-switch="selectionMode">
  <div ng-switch-when="year">
    <div class="w-calendar-header">
      <span class="w-calendar-prev" ng-click="prevYearRange()"></span>
      <span class="w-calendar-title" ng-click="switchSelectionMode()">
        {{years[0]}}-{{years[years.length-1]}}
      </span>
      <span class="w-calendar-next" ng-click="nextYearRange()"></span>
    </div>
    <table class="table-condensed">
      <tr ng-repeat="yearGroup in yearGroups">
        <td ng-repeat="year in yearGroup"
            ng-click="selectYear(year)"
            ng-class="{'year-selected': year == selectedYear}"
            class="year">
          {{year}}
        </td>
      </tr>
    </table>
  </div>
  <div ng-switch-when="month">
    <div class="w-calendar-header">
      <span class="w-calendar-prev" ng-click="prevYear()"></span>
      <span class="w-calendar-title" ng-click="switchSelectionMode()">
        {{selectedYear}}
      </span>
      <span class="w-calendar-next" ng-click="nextYear()"></span>
    </div>
    <table class="table-condensed">
      <tr ng-repeat="monthGroup in monthGroups">
        <td ng-repeat="month in monthGroup"
            ng-click="selectMonth(month)"
            ng-class="{'month-selected': selectedDate.getFullYear() == selectedYear && month == months[selectedMonth]}"
            class="month">
          {{month}}
        </td>
      </tr>
    </table>
  </div>
  <div ng-switch-default>
    <div class="w-calendar-header">
      <span class="w-calendar-prev" ng-click="prevMonth()"></span>
      <span class="w-calendar-title" ng-click="switchSelectionMode()">
        {{months[selectedMonth] + ', ' + selectedYear}}
      </span>
      <span class="w-calendar-next" ng-click="nextMonth()"></span>
    </div>
    <table class="table-condensed">
      <thead>
      <tr>
        <th ng-repeat="weekDay in weekDays">
          {{weekDay}}
        </th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="week in weeks">
        <td ng-repeat="day in week" class="day"
            ng-class="{'day-in-selected-month': isDayInSelectedMonth(day),
                       'day-current': isCurrentDate(day),
                       'day-selected': isSelectedDate(day)}"
            ng-click="selectDay(day)">
          {{day.getDate()}}
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
